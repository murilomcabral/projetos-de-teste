<!DOCTYPE html>
<html lang="pt-br">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <style>

      *, ::before, ::after {margin: 0;padding: 0;box-sizing: border-box;}

      :root {
         --size: 100vh;
      }

      html {
         background-color: bisque;
      }

      svg {
         margin: auto;
         width: 100%;
         height: 90vh;
         stroke: red;
         fill: rgba(0 0 255 / .2);
         stroke-width: 1px;
         background-color: hsla(0 0% 50% / .5);
      }

   </style>
   <title></title>
</head>
<body>
   <svg>
      <path></path>
   </svg>
   <script>

      const svgCanvas = document.querySelector('svg')
      const pathObject = document.querySelector('path')
      let dCheck = ''
      
      //track line end
      function handleMouveEvent(e) {
         pathObject.setAttribute('d', `${dCheck}L${e.clientX} ${e.clientY}`)
      }

      //double-click closes path
      function closePath() {
         d = pathObject.getAttribute('d')
         d += 'z'
         pathObject.setAttribute('d', d)
         svgCanvas.removeEventListener('mousemove', handleMouveEvent)
      }

      svgCanvas.addEventListener('dblclick', closePath)
      window.addEventListener('keydown', (e) => {if (e.key === 'Enter') {closePath()}})

      //start drawing
      svgCanvas.addEventListener('click', (e) => {

         if (!pathObject.hasAttribute('d')) {
            pathObject.setAttribute('d', `M${e.clientX} ${e.clientY}`)
         } else {
            let d2 = pathObject.getAttribute('d')
            if (d2.charAt(d2.length - 1) == 'z') {
               pathObject.setAttribute('d', `${d2}M${e.clientX} ${e.clientY}`)
            }
         }

         dCheck = pathObject.getAttribute('d')
         svgCanvas.addEventListener('mousemove', handleMouveEvent)

      })
   </script>
</body>
</html>